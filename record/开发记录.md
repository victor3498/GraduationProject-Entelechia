## 2026/1/28之前
基本后端框架构建，前端tiptap基本做了了解，简易富文本编辑器搭载；后端建表语句记录如下：
用户表 users
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  password_hash TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

文档表 documents（核心）
CREATE TABLE documents (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL,
  title VARCHAR(255),
  content JSONB NOT NULL,
  is_starred BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

  CONSTRAINT fk_user
    FOREIGN KEY (user_id)
    REFERENCES users(id)
    ON DELETE CASCADE
);

用户文档状态表（上一次打开文档）
CREATE TABLE user_preferences (
  user_id INTEGER PRIMARY KEY,
  last_opened_doc_id INTEGER,

  CONSTRAINT fk_pref_user
    FOREIGN KEY (user_id)
    REFERENCES users(id)
    ON DELETE CASCADE
);

## 2026/1/28
   目前在做用户登录认证这一块，
   现在的问题：注册时id没有生成一并插入，对于接下来的流程（登录之后id如何传递，多个访问时怎样承担的）等并不了解，以及这个后端架构能不能支撑的住访问并发之类的（觉得这个东西目前太简单了）

## 2026/1/29
   看得头大，数据库白学了全完了，神马密码哈希了存进去大坏事，登录都登不明白
   重置了数据库表，userid处换了uuid，今天到这算了

## 2026/1/30
  基本的登录，修改密码功能实现，准备之后升级token认证为访问token与刷新token

## 2026/1/31
    基本实现双token，尚未测试

   

   